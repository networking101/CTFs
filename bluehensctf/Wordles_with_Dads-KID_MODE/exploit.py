from pwn import *
import sys
import json

p = remote('0.cloud.chals.io', 29788)

alphabet = list("ABCDEFGHIJKLMNOPQRSTUVWXYZ")

p.readuntil("Your joke is ")
temp = p.readline()
print(temp)
jokeSize = temp[:2]
solution = temp[-3:-1].decode()
solution += '_' * (int(jokeSize)-2)
solution = list(solution)

guess = ''.join(alphabet) + "A" * (int(jokeSize) - len(alphabet))
print(guess)

p.readuntil("Guess? >\n")
p.send(guess)
p.send(b"\n")
temp = p.readline()
print(temp)

line = temp.decode().replace("'", "\"")
j = json.loads(line.split(" Guesses")[0])
for x in j["correct"]:
    solution[x] = guess[x]
    #print(solution)

newAlpha = []
for y in j["position"]:
    if int(y) > 25:
        continue
    newAlpha.append(alphabet[y])
alphabet = newAlpha

"""
print("Solution")
print(solution)
print("Alphabet")
print(alphabet)
exit(0)
"""

combos = {}
for i in range(jokeSize):
    combos[i] = []

for i in range(5):
    



"""
for i in range(5):
    p.readuntil("Guess? >\n")
    p.send(solution.replace("_", i))
    p.send(b"\n")
    temp = p.readline()
    print(temp)
    line = temp.decode().replace("'", "\"")
    j = json.loads(line.split(" Guesses")[0])
    for k in j["correct"]:
        if solution[k] == "_":
            solution = solution[:k-1] + i + solution[k:]
    print(j)
    print(solution)
    input("JUJU")
    #exit(0)
"""